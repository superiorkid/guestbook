<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Simple guestbook</title>

  {{bootstrap.load_css()}}
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

  <h2>GuestBook</h2>

  <form method="post"> 
    {{ forms.csrf_token() }}

    <p>        
      {{ forms.name.label }} : {{ forms.name }}
      
      {% for error in forms.name.errors %}
        {{error}}
      {% endfor %}
    </p>
    <p>
      {{ forms.email.label }} : {{ forms.email }}
      
      {% for error in forms.email.errors %}
        {{error}}
      {% endfor %}
        
    </p>
    <p>
      {{ forms.message.label }} <br>
      {{forms.message}}

      {% for error in forms.message.errors %}
        {{error}}
      {% endfor %}
        
    </p>
    <p>
      {{ forms.recaptcha }}
    </p>

    <p>
      {{ forms.submit }}
    </p>


  </form>
  <table id="dtBasicExample" class="table table-striped table-bordered table-sm" cellspacing="0" width="100%">
    <thead>
      <tr>
        <td>#</td>
        <th>Name</th>
        <th>Email</th>
        <th>Message</th>
        <th>action</th>
      </tr>
    </thead>
    <tbody>
    
    {% if _guestbook %}
      {% for msg in _guestbook %}
        <tr>
          <td>{{ loop.index + pagination.skip }}</td>
          <td>{{msg.name}}</td>
          <td>{{msg.email}}</td>
          <td>{{msg.message}}</td>
          <td>
            <a href="{{ url_for('delete', guestId=msg._id) }}">Delete</a>
          </td>
        </tr>
      {% endfor %}      
      <!-- {{ pagination.links}} -->
    
    {% if pagination.has_next %}
      <a href="{{ url_for('messages', page=pagination.page + 1) }}">Next &raquo;</a>
    {% endif %}
      

    {% endif %}


    </tbody>
  </table>



  {{bootstrap.load_js()}}    

</body>
</html>